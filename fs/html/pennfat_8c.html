<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: pennfat.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">pennfat.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>An implementation of filesystem related shell commands.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdint.h&gt;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;unistd.h&gt;</code><br />
<code>#include &lt;sys/stat.h&gt;</code><br />
<code>#include &lt;fcntl.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;time.h&gt;</code><br />
<code>#include &lt;stdbool.h&gt;</code><br />
<code>#include &lt;errno.h&gt;</code><br />
<code>#include &quot;<a class="el" href="pennfat_8h_source.html">pennfat.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="filesys_8h_source.html">filesys.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for pennfat.c:</div>
<div class="dyncontent">
<div class="center"><img src="pennfat_8c__incl.png" border="0" usemap="#apennfat_8c" alt=""/></div>
<map name="apennfat_8c" id="apennfat_8c">
<area shape="rect" title="An implementation of filesystem related shell commands." alt="" coords="527,5,610,32"/>
<area shape="rect" title=" " alt="" coords="5,80,76,107"/>
<area shape="rect" title=" " alt="" coords="101,80,167,107"/>
<area shape="rect" title=" " alt="" coords="191,80,266,107"/>
<area shape="rect" title=" " alt="" coords="290,80,375,107"/>
<area shape="rect" title=" " alt="" coords="400,80,463,107"/>
<area shape="rect" title=" " alt="" coords="487,80,557,107"/>
<area shape="rect" title=" " alt="" coords="581,80,652,107"/>
<area shape="rect" title=" " alt="" coords="677,80,741,107"/>
<area shape="rect" title=" " alt="" coords="765,80,847,107"/>
<area shape="rect" title=" " alt="" coords="872,80,940,107"/>
<area shape="rect" href="pennfat_8h.html" title="Filesystem related shell commands." alt="" coords="964,80,1048,107"/>
<area shape="rect" href="filesys_8h.html" title="An API for mounting and accessing filesystems." alt="" coords="1072,80,1148,107"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvector.html">vector</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A sized byte array type.  <a href="structvector.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:af0f2173e3b202ddf5756531b4471dcb2"><td class="memItemLeft" align="right" valign="top"><a id="af0f2173e3b202ddf5756531b4471dcb2"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pennfat_8c.html#af0f2173e3b202ddf5756531b4471dcb2">MAX_LINE_LENGTH</a>&#160;&#160;&#160;8192</td></tr>
<tr class="memdesc:af0f2173e3b202ddf5756531b4471dcb2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum supported user input line length. <br /></td></tr>
<tr class="separator:af0f2173e3b202ddf5756531b4471dcb2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a222e209f687eeff0de7d2e8e535c96f1"><td class="memItemLeft" align="right" valign="top"><a id="a222e209f687eeff0de7d2e8e535c96f1"></a>
typedef struct <a class="el" href="structvector.html">vector</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pennfat_8c.html#a222e209f687eeff0de7d2e8e535c96f1">Vec</a></td></tr>
<tr class="memdesc:a222e209f687eeff0de7d2e8e535c96f1"><td class="mdescLeft">&#160;</td><td class="mdescRight">A sized byte array type. <br /></td></tr>
<tr class="separator:a222e209f687eeff0de7d2e8e535c96f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:af44bc6351b4a4edd340bf98f4462a7fd"><td class="memItemLeft" align="right" valign="top"><a id="af44bc6351b4a4edd340bf98f4462a7fd"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pennfat_8c.html#af44bc6351b4a4edd340bf98f4462a7fd">arg_error</a> (char *err)</td></tr>
<tr class="memdesc:af44bc6351b4a4edd340bf98f4462a7fd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Simple helper to print argument errors with less boilerplate. <br /></td></tr>
<tr class="separator:af44bc6351b4a4edd340bf98f4462a7fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0cae5eda7f4bfaf4bcee660e476afb0e"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pennfat_8c.html#a0cae5eda7f4bfaf4bcee660e476afb0e">abs_path</a> (char *name)</td></tr>
<tr class="memdesc:a0cae5eda7f4bfaf4bcee660e476afb0e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Computes a parsed absolute path string to the file located at <code>name</code>.  <a href="pennfat_8c.html#a0cae5eda7f4bfaf4bcee660e476afb0e">More...</a><br /></td></tr>
<tr class="separator:a0cae5eda7f4bfaf4bcee660e476afb0e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9cc84e3f1308989e68fc384d2abd43a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pennfat_8c.html#a222e209f687eeff0de7d2e8e535c96f1">Vec</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pennfat_8c.html#af9cc84e3f1308989e68fc384d2abd43a">read_files</a> (char **names, int num)</td></tr>
<tr class="memdesc:af9cc84e3f1308989e68fc384d2abd43a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads the contents of <code>num</code> files <code>names</code> into a buffer.  <a href="pennfat_8c.html#af9cc84e3f1308989e68fc384d2abd43a">More...</a><br /></td></tr>
<tr class="separator:af9cc84e3f1308989e68fc384d2abd43a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89ca2da3a9f75c37a7e2adca01d22650"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pennfat_8c.html#a89ca2da3a9f75c37a7e2adca01d22650">pf_mkfs</a> (int argc, char **args)</td></tr>
<tr class="memdesc:a89ca2da3a9f75c37a7e2adca01d22650"><td class="mdescLeft">&#160;</td><td class="mdescRight">Makes a filesystem in the current directory on the host machine.  <a href="pennfat_8c.html#a89ca2da3a9f75c37a7e2adca01d22650">More...</a><br /></td></tr>
<tr class="separator:a89ca2da3a9f75c37a7e2adca01d22650"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa8b02889227b9d4af5554272fdc7ec04"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pennfat_8c.html#aa8b02889227b9d4af5554272fdc7ec04">pf_mount</a> (int argc, char **args)</td></tr>
<tr class="memdesc:aa8b02889227b9d4af5554272fdc7ec04"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mount a filesystem.  <a href="pennfat_8c.html#aa8b02889227b9d4af5554272fdc7ec04">More...</a><br /></td></tr>
<tr class="separator:aa8b02889227b9d4af5554272fdc7ec04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae6247be71b9a646a221c2ea18dfc33e1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pennfat_8c.html#ae6247be71b9a646a221c2ea18dfc33e1">pf_umount</a> (int argc, char **args)</td></tr>
<tr class="memdesc:ae6247be71b9a646a221c2ea18dfc33e1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unmount currently mounted filesystem.  <a href="pennfat_8c.html#ae6247be71b9a646a221c2ea18dfc33e1">More...</a><br /></td></tr>
<tr class="separator:ae6247be71b9a646a221c2ea18dfc33e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5ef7cf9b04dddf5e873b65e3fda50a4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pennfat_8c.html#aa5ef7cf9b04dddf5e873b65e3fda50a4">pf_touch</a> (int argc, char **args)</td></tr>
<tr class="memdesc:aa5ef7cf9b04dddf5e873b65e3fda50a4"><td class="mdescLeft">&#160;</td><td class="mdescRight">For each input file, update its timestamp or create it.  <a href="pennfat_8c.html#aa5ef7cf9b04dddf5e873b65e3fda50a4">More...</a><br /></td></tr>
<tr class="separator:aa5ef7cf9b04dddf5e873b65e3fda50a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a102878c1cc3cbfc9ce529a78360b7438"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pennfat_8c.html#a102878c1cc3cbfc9ce529a78360b7438">pf_rm</a> (int argc, char **args)</td></tr>
<tr class="memdesc:a102878c1cc3cbfc9ce529a78360b7438"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove each input file.  <a href="pennfat_8c.html#a102878c1cc3cbfc9ce529a78360b7438">More...</a><br /></td></tr>
<tr class="separator:a102878c1cc3cbfc9ce529a78360b7438"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b024f3508da772a59b267ac904e2cbd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pennfat_8c.html#a8b024f3508da772a59b267ac904e2cbd">pf_mv</a> (int argc, char **args)</td></tr>
<tr class="memdesc:a8b024f3508da772a59b267ac904e2cbd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Renames source to dest or moves source into dest if dest is a directory.  <a href="pennfat_8c.html#a8b024f3508da772a59b267ac904e2cbd">More...</a><br /></td></tr>
<tr class="separator:a8b024f3508da772a59b267ac904e2cbd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff83dcd8dfe46b5d9a6aea36db3bbf73"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pennfat_8c.html#aff83dcd8dfe46b5d9a6aea36db3bbf73">pf_cp</a> (int argc, char **args)</td></tr>
<tr class="memdesc:aff83dcd8dfe46b5d9a6aea36db3bbf73"><td class="mdescLeft">&#160;</td><td class="mdescRight">Copies source to dest, each possibly on the host machine.  <a href="pennfat_8c.html#aff83dcd8dfe46b5d9a6aea36db3bbf73">More...</a><br /></td></tr>
<tr class="separator:aff83dcd8dfe46b5d9a6aea36db3bbf73"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21a9c4ce21251c182a062256ccdbd7dd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pennfat_8c.html#a21a9c4ce21251c182a062256ccdbd7dd">pf_cat</a> (int argc, char **args)</td></tr>
<tr class="memdesc:a21a9c4ce21251c182a062256ccdbd7dd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read from a list of files or write to one file.  <a href="pennfat_8c.html#a21a9c4ce21251c182a062256ccdbd7dd">More...</a><br /></td></tr>
<tr class="separator:a21a9c4ce21251c182a062256ccdbd7dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a46b2b33b03fbd50c02f5b214a8aac80d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pennfat_8c.html#a46b2b33b03fbd50c02f5b214a8aac80d">pf_ls</a> (int argc, char **args)</td></tr>
<tr class="memdesc:a46b2b33b03fbd50c02f5b214a8aac80d"><td class="mdescLeft">&#160;</td><td class="mdescRight">List the files in a directory.  <a href="pennfat_8c.html#a46b2b33b03fbd50c02f5b214a8aac80d">More...</a><br /></td></tr>
<tr class="separator:a46b2b33b03fbd50c02f5b214a8aac80d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0c1fa4f56310abb1142c4ad59316bc8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pennfat_8c.html#ad0c1fa4f56310abb1142c4ad59316bc8">pf_chmod</a> (int argc, char **args)</td></tr>
<tr class="memdesc:ad0c1fa4f56310abb1142c4ad59316bc8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Change the permissions of a file.  <a href="pennfat_8c.html#ad0c1fa4f56310abb1142c4ad59316bc8">More...</a><br /></td></tr>
<tr class="separator:ad0c1fa4f56310abb1142c4ad59316bc8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4739cb51447559a087f678f039e4432e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pennfat_8c.html#a4739cb51447559a087f678f039e4432e">pf_cd</a> (int argc, char **args)</td></tr>
<tr class="memdesc:a4739cb51447559a087f678f039e4432e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Change the current working directory.  <a href="pennfat_8c.html#a4739cb51447559a087f678f039e4432e">More...</a><br /></td></tr>
<tr class="separator:a4739cb51447559a087f678f039e4432e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf841913a6366ef3ed259a72b6783b8c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pennfat_8c.html#aaf841913a6366ef3ed259a72b6783b8c">pf_mkdir</a> (int argc, char **args)</td></tr>
<tr class="memdesc:aaf841913a6366ef3ed259a72b6783b8c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Make a directory.  <a href="pennfat_8c.html#aaf841913a6366ef3ed259a72b6783b8c">More...</a><br /></td></tr>
<tr class="separator:aaf841913a6366ef3ed259a72b6783b8c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e03ff76f6de53a052cf83d64dc03307"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pennfat_8c.html#a0e03ff76f6de53a052cf83d64dc03307">pf_rmdir</a> (int argc, char **args)</td></tr>
<tr class="memdesc:a0e03ff76f6de53a052cf83d64dc03307"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove a directory.  <a href="pennfat_8c.html#a0e03ff76f6de53a052cf83d64dc03307">More...</a><br /></td></tr>
<tr class="separator:a0e03ff76f6de53a052cf83d64dc03307"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aacde6b8a4bcb0c6e0491a2887ae2357b"><td class="memItemLeft" align="right" valign="top"><a id="aacde6b8a4bcb0c6e0491a2887ae2357b"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pennfat_8c.html#aacde6b8a4bcb0c6e0491a2887ae2357b">pf_pwd</a> (int argc, char **args)</td></tr>
<tr class="memdesc:aacde6b8a4bcb0c6e0491a2887ae2357b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Print the current working directory. <br /></td></tr>
<tr class="separator:aacde6b8a4bcb0c6e0491a2887ae2357b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a29e73b6b5a4e87239cd7b80004624d3a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pennfat_8c.html#a29e73b6b5a4e87239cd7b80004624d3a">pf_ln</a> (int argc, char **args)</td></tr>
<tr class="memdesc:a29e73b6b5a4e87239cd7b80004624d3a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a link to a file.  <a href="pennfat_8c.html#a29e73b6b5a4e87239cd7b80004624d3a">More...</a><br /></td></tr>
<tr class="separator:a29e73b6b5a4e87239cd7b80004624d3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2201d4f3fe424b79dbb580041d738741"><td class="memItemLeft" align="right" valign="top"><a id="a2201d4f3fe424b79dbb580041d738741"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pennfat_8c.html#a2201d4f3fe424b79dbb580041d738741">main</a> (int _argc, char **_argv)</td></tr>
<tr class="memdesc:a2201d4f3fe424b79dbb580041d738741"><td class="mdescLeft">&#160;</td><td class="mdescRight">Main loop. <br /></td></tr>
<tr class="separator:a2201d4f3fe424b79dbb580041d738741"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a126af3cb8dfb780dc35d1d87982ce22f"><td class="memItemLeft" align="right" valign="top"><a id="a126af3cb8dfb780dc35d1d87982ce22f"></a>
const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pennfat_8c.html#a126af3cb8dfb780dc35d1d87982ce22f">MONTHS</a> [] = {&quot;Jan&quot;, &quot;Feb&quot;, &quot;Mar&quot;, &quot;Apr&quot;, &quot;May&quot;, &quot;Jun&quot;, &quot;Jul&quot;, &quot;Aug&quot;, &quot;Sep&quot;, &quot;Oct&quot;, &quot;Nov&quot;, &quot;Dec&quot;}</td></tr>
<tr class="memdesc:a126af3cb8dfb780dc35d1d87982ce22f"><td class="mdescLeft">&#160;</td><td class="mdescRight">An array of months for <code>ls</code> pretty-print. <br /></td></tr>
<tr class="separator:a126af3cb8dfb780dc35d1d87982ce22f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4be832ac49cb1384b79b9423028f1d54"><td class="memItemLeft" align="right" valign="top"><a id="a4be832ac49cb1384b79b9423028f1d54"></a>
char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pennfat_8c.html#a4be832ac49cb1384b79b9423028f1d54">pwd</a></td></tr>
<tr class="memdesc:a4be832ac49cb1384b79b9423028f1d54"><td class="mdescLeft">&#160;</td><td class="mdescRight">The current working directory. <br /></td></tr>
<tr class="separator:a4be832ac49cb1384b79b9423028f1d54"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a14eb553c9586c0259b643ca35708f0d5"><td class="memItemLeft" align="right" valign="top"><a id="a14eb553c9586c0259b643ca35708f0d5"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pennfat_8c.html#a14eb553c9586c0259b643ca35708f0d5">mounted</a> = false</td></tr>
<tr class="memdesc:a14eb553c9586c0259b643ca35708f0d5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Is there a mounted filesystem or not. <br /></td></tr>
<tr class="separator:a14eb553c9586c0259b643ca35708f0d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>An implementation of filesystem related shell commands. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a0cae5eda7f4bfaf4bcee660e476afb0e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0cae5eda7f4bfaf4bcee660e476afb0e">&#9670;&nbsp;</a></span>abs_path()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* abs_path </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Computes a parsed absolute path string to the file located at <code>name</code>. </p>
<p>If <code>name</code> is an absolute path (begins with '\') it is returned. If <code>name</code> is a relative path we append it to the global <code>pwd</code> variable. "Parsed" means that all dots are removed from the returned string. Single dots '.' do nothing. Double dots '..' go up one directory (unless at root).</p>
<dl class="section return"><dt>Returns</dt><dd>The path from the root directory to the file. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>The location of the file. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a21a9c4ce21251c182a062256ccdbd7dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a21a9c4ce21251c182a062256ccdbd7dd">&#9670;&nbsp;</a></span>pf_cat()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pf_cat </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>args</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read from a list of files or write to one file. </p>
<p>With the -a flag cat appends to a file. With the -w flag cat writes to a file. Following the flag is a single file which is written to. Without a flag cat writes to STDOUT. If there are no files preceding the flag cat reads from STDIN. If there are files preceding the flag cat reads them in order. All links are followed. Cat prints an error if the user tries to read from STDIN and write to STDOUT, either source or dest is a directory, a source file doesn't exist, or if a directory along the path to the destination file doesn't exist.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">args[i]</td><td>Optional list of source files to read from. </td></tr>
    <tr><td class="paramname">args[argc-2]</td><td>Optional append/write flag. </td></tr>
    <tr><td class="paramname">args[argc-1]</td><td>Optional output file. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a4739cb51447559a087f678f039e4432e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4739cb51447559a087f678f039e4432e">&#9670;&nbsp;</a></span>pf_cd()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pf_cd </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>args</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Change the current working directory. </p>
<p>If the path does not lead to a directory cd prints an error. Dot and dot-dot supported.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">args[1]</td><td>Absolute or relative path to a directory. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ad0c1fa4f56310abb1142c4ad59316bc8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad0c1fa4f56310abb1142c4ad59316bc8">&#9670;&nbsp;</a></span>pf_chmod()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pf_chmod </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>args</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Change the permissions of a file. </p>
<p>Can add/remove one of read/write/execute on a file. Links are always followed. Prints an error if the permissions modifier is invalid or if the file cannot be found.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">args&lt;a</td><td>href="+/-"&gt;1(r/w/x) permissions modifier. </td></tr>
    <tr><td class="paramname">args[2]</td><td>File to change permissions of. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aff83dcd8dfe46b5d9a6aea36db3bbf73"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aff83dcd8dfe46b5d9a6aea36db3bbf73">&#9670;&nbsp;</a></span>pf_cp()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pf_cp </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>args</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Copies source to dest, each possibly on the host machine. </p>
<p>If source doesn't exist prints an error. If a directory on the path to dest doesn't exist prints an error. If source is a directory prints an error. All links are followed. Up to one -h flag is allowed. If dest is a directory, we instead set dest = path_to_dest/name_of_source and follow the above rules effectively copying source into dest.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">args[1]</td><td>Source file, possibly with preceding -h flag. </td></tr>
    <tr><td class="paramname">args[2]</td><td>Destination file, possibly with preceding -h flag. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a29e73b6b5a4e87239cd7b80004624d3a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a29e73b6b5a4e87239cd7b80004624d3a">&#9670;&nbsp;</a></span>pf_ln()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pf_ln </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>args</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a link to a file. </p>
<p>Only symbolic links are supported. Target file doesn't need to exist. If link name already exists as a file prints an error. If a directory on the link name path doesn't exist prints an error.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">args[1]</td><td>Mandatory symbolic <code>-s</code> flag. </td></tr>
    <tr><td class="paramname">args[2]</td><td>Target file. </td></tr>
    <tr><td class="paramname">args[3]</td><td>Link name. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a46b2b33b03fbd50c02f5b214a8aac80d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a46b2b33b03fbd50c02f5b214a8aac80d">&#9670;&nbsp;</a></span>pf_ls()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pf_ls </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>args</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>List the files in a directory. </p>
<p>Without an argument ls lists files in the current directory. With an absolute or relative path ls lists files in that directory. If the argument does not lead to a directory ls prints an error.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">args[1]</td><td>Optional absolute or relative path to a directory. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aaf841913a6366ef3ed259a72b6783b8c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf841913a6366ef3ed259a72b6783b8c">&#9670;&nbsp;</a></span>pf_mkdir()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pf_mkdir </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>args</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Make a directory. </p>
<p>Any number of arguments supported. If the file exists an error is printed. If a directory along the path doesn't exist an error is printed.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">args[i]</td><td>Absolute or relative path to a directory. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a89ca2da3a9f75c37a7e2adca01d22650"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a89ca2da3a9f75c37a7e2adca01d22650">&#9670;&nbsp;</a></span>pf_mkfs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pf_mkfs </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>args</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Makes a filesystem in the current directory on the host machine. </p>
<p>Prints an error on malformed input.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">args[1]</td><td>Name of the filesystem. </td></tr>
    <tr><td class="paramname">args[2]</td><td>Number of blocks in the FAT, from 1-32. </td></tr>
    <tr><td class="paramname">args[3]</td><td>Block size config, from 0-4. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aa8b02889227b9d4af5554272fdc7ec04"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa8b02889227b9d4af5554272fdc7ec04">&#9670;&nbsp;</a></span>pf_mount()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pf_mount </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>args</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Mount a filesystem. </p>
<p>Sets <code>pwd</code> and <code>mounted</code> variables appropriately. Prints an error if another filesystem is already mounted.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">args[1]</td><td>Name of the filesystem. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a8b024f3508da772a59b267ac904e2cbd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b024f3508da772a59b267ac904e2cbd">&#9670;&nbsp;</a></span>pf_mv()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pf_mv </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>args</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Renames source to dest or moves source into dest if dest is a directory. </p>
<p>If source doesn't exist an error is printed. If a directory in the path to dest doesn't exist an error is printed. If dest doesn't exist simply renames source to dest. If dest is a file and source is a directory throws an error. If dest and source are files removes dest's data and then renames source to dest. If dest is a link it is NOT followed. If dest is a directory, we instead set dest = path_to_dest/name_of_source and follow the above rules effectively moving source into dest.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">args[1]</td><td>Source file. </td></tr>
    <tr><td class="paramname">args[2]</td><td>Destination file. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a102878c1cc3cbfc9ce529a78360b7438"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a102878c1cc3cbfc9ce529a78360b7438">&#9670;&nbsp;</a></span>pf_rm()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pf_rm </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>args</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Remove each input file. </p>
<p>Takes any number of inputs. Will remove regular files and links but prints an error if input file is a directory. If input is a link removes the link and not the target file.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">args[i]</td><td>Name of file to remove. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a0e03ff76f6de53a052cf83d64dc03307"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0e03ff76f6de53a052cf83d64dc03307">&#9670;&nbsp;</a></span>pf_rmdir()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pf_rmdir </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>args</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Remove a directory. </p>
<p>Any number of arguments supported. If the file doesn't exist or is not a directory an error is printed. If the directory is not empty an error is printed. Links are not followed.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">args[i]</td><td>Absolute or relative path to a directory. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aa5ef7cf9b04dddf5e873b65e3fda50a4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa5ef7cf9b04dddf5e873b65e3fda50a4">&#9670;&nbsp;</a></span>pf_touch()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pf_touch </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>args</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>For each input file, update its timestamp or create it. </p>
<p>Takes any number of inputs. If file doesn't exist creates it as a regular file. If file is regular or a directory updates its timestamp. If file is a link the file it points to is touched instead. In particular, if the file the link points to doesn't exist it is created. Prints if a directory along the path specified doesn't exist.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">args[i]</td><td>Name of file to touch. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ae6247be71b9a646a221c2ea18dfc33e1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae6247be71b9a646a221c2ea18dfc33e1">&#9670;&nbsp;</a></span>pf_umount()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pf_umount </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>args</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unmount currently mounted filesystem. </p>
<p>Resets <code>mounted</code> to false. Prints an error if no filesystem is currently mounted. </p>

</div>
</div>
<a id="af9cc84e3f1308989e68fc384d2abd43a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af9cc84e3f1308989e68fc384d2abd43a">&#9670;&nbsp;</a></span>read_files()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pennfat_8c.html#a222e209f687eeff0de7d2e8e535c96f1">Vec</a> read_files </td>
          <td>(</td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>names</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>num</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads the contents of <code>num</code> files <code>names</code> into a buffer. </p>
<p>Skips any link files to read the file which is pointed to. If any file doesn't exist or can't be read the function fails.</p>
<dl class="section return"><dt>Returns</dt><dd>A vector containing the files' contents on success and an empty vector with size -1 on failure. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">names</td><td>A sequence of absolute paths to read from. </td></tr>
    <tr><td class="paramname">num</td><td>The number of files in the input. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
